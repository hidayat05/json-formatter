<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>JSON Formatter</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/styles.css" />
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    </head>
    <body>
        <div class="container">
            <h1>JSON Formatter Tool</h1>

            <div class="top-bar">
                <button id="converterTabBtn" class="tab-button active">
                    JSON Converter
                </button>
                <button id="compareTabBtn" class="tab-button">
                    JSON Compare
                </button>
                <button id="mermaidTabBtn" class="tab-button">
                    Mermaid Editor
                </button>
            </div>

            <div id="converterSection">
                <div class="button-group">
                    <button class="primary" id="minifyBtn">Minify JSON</button>
                    <button class="primary" id="formatBtn">Format JSON</button>
                    <button class="secondary" id="jsonToStringBtn">
                        JSON â†’ String
                    </button>
                    <button class="secondary" id="stringToJsonBtn">
                        String â†’ JSON
                    </button>
                    <button class="secondary" id="jsonToProtoBtn">
                        JSON â†’ Proto
                    </button>
                    <button class="secondary" id="protoToJsonBtn">
                        Proto â†’ JSON
                    </button>
                </div>

                <div class="language-selector">
                    <label for="languageSelect">Convert to Class:</label>
                    <select id="languageSelect">
                        <option value="typescript">TypeScript</option>
                        <option value="javascript">JavaScript</option>
                        <option value="python">Python</option>
                        <option value="rust">Rust</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                        <option value="go">Go</option>
                        <option value="kotlin">Kotlin</option>
                        <option value="swift">Swift</option>
                    </select>
                    <input
                        type="text"
                        id="classNameInputText"
                        placeholder="Class name (optional)"
                    />
                    <button class="primary" id="jsonToClassBtn">
                        Generate Class
                    </button>
                </div>

                <div class="button-group">
                    <button class="danger" id="clearBtn">Clear All</button>
                </div>

                <div class="editor-container">
                    <div class="editor-section">
                        <div class="editor-header">
                            <span class="editor-label">Input</span>
                            <button class="copy-button" id="copyInputBtn">
                                ðŸ“‹ Copy
                            </button>
                        </div>
                        <textarea
                            id="inputText"
                            placeholder="Enter or paste JSON here..."
                        ></textarea>
                    </div>

                    <div class="editor-section">
                        <div class="editor-header">
                            <span class="editor-label">Output</span>
                            <button class="copy-button" id="copyOutputBtn">
                                ðŸ“‹ Copy
                            </button>
                        </div>
                        <textarea
                            id="outputText"
                            class="output"
                            readonly
                        ></textarea>
                    </div>
                </div>
            </div>

            <div id="compareSection" class="hidden">
                <div class="button-group">
                    <button class="primary" id="beautifyLeftBtn">
                        Beautify Left
                    </button>
                    <button class="primary" id="beautifyRightBtn">
                        Beautify Right
                    </button>
                    <button class="secondary" id="compareBtn">Compare</button>
                    <button class="secondary" id="copyDiffBtn">
                        Copy Diff Text
                    </button>
                </div>

                <div class="button-group">
                    <button class="danger" id="clearCompareBtn">
                        Clear All
                    </button>
                </div>

                <div class="editor-container">
                    <div class="editor-section">
                        <div class="editor-header">
                            <span class="editor-label">Left JSON</span>
                            <button class="copy-button" id="copyLeftCompareBtn">
                                ðŸ“‹ Copy
                            </button>
                        </div>
                        <textarea
                            id="compareLeft"
                            placeholder="Enter or paste left JSON..."
                        ></textarea>
                    </div>

                    <div class="editor-section">
                        <div class="editor-header">
                            <span class="editor-label">Right JSON</span>
                            <button
                                class="copy-button"
                                id="copyRightCompareBtn"
                            >
                                ðŸ“‹ Copy
                            </button>
                        </div>
                        <textarea
                            id="compareRight"
                            placeholder="Enter or paste right JSON..."
                        ></textarea>
                    </div>
                </div>

                <div class="diff-panel" id="diffContainer">
                    <div class="diff-header">Left</div>
                    <div class="diff-header">Right</div>
                </div>
            </div>

            <div id="mermaidSection" class="hidden">
                <div class="button-group">
                    <button class="primary" id="renderMermaidBtn">
                        ðŸ”„ Render Diagram
                    </button>
                    <button class="success" id="downloadMermaidBtn">
                        ðŸ“¥ Download PNG
                    </button>
                    <button class="danger" id="clearMermaidBtn">Clear</button>
                </div>

                <div class="mermaid-container">
                    <div class="mermaid-editor-section">
                        <div class="editor-header">
                            <span class="editor-label">Mermaid Code</span>
                            <button class="copy-button" id="copyMermaidBtn">
                                ðŸ“‹ Copy
                            </button>
                        </div>
                        <textarea
                            id="mermaidInput"
                            placeholder="Enter Mermaid diagram code here...

Example:
graph TD
    A[Start] --> B{Is it working?}
    B -->|Yes| C[Great!]
    B -->|No| D[Debug]
    D --> B"
                        ></textarea>
                    </div>

                    <div class="mermaid-preview-section">
                        <div class="editor-header">
                            <span class="editor-label">Preview</span>
                            <div class="zoom-controls">
                                <button
                                    class="zoom-button"
                                    id="dragToggleBtn"
                                    title="Toggle Drag/Pan Mode"
                                >
                                    âœ‹
                                </button>
                                <span class="zoom-separator">|</span>
                                <button
                                    class="zoom-button"
                                    id="zoomOutBtn"
                                    title="Zoom Out"
                                >
                                    âˆ’
                                </button>
                                <span class="zoom-level" id="zoomLevel"
                                    >100%</span
                                >
                                <button
                                    class="zoom-button"
                                    id="zoomInBtn"
                                    title="Zoom In"
                                >
                                    +
                                </button>
                                <button
                                    class="zoom-button"
                                    id="zoomResetBtn"
                                    title="Reset Zoom"
                                >
                                    â†º
                                </button>
                            </div>
                        </div>
                        <div class="mermaid-preview" id="mermaidPreview">
                            <div class="mermaid-placeholder">
                                Enter Mermaid code and click "Render Diagram" to
                                preview
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="status-message hidden" id="statusMessage"></div>
        </div>

        <script type="module" src="/main.js"></script>
    </body>
</html>
